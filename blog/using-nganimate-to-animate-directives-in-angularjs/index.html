<!DOCTYPE html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=description content="AngularJS makes it easy to animate elements using CSS. When ngAnimate module is specified as a dependency, many default Angular directives inherit the ability to automatically add and/or remove classes when certain events occur."><title>Using ngAnimate to animate directives in AngularJS | David Chin</title><link rel=canonical href="http://davidchin.me/blog/using-nganimate-to-animate-directives-in-angularjs/"><link rel=stylesheet href="http://fonts.googleapis.com/css?family=Fira+Sans:300,400,700,300italic,400italic,700italic"><link rel=stylesheet href=/css/application.a3ea.css><link rel=apple-touch-icon sizes=76x76 href=/apple-touch-icon-76x76.png><link rel=apple-touch-icon sizes=152x152 href=/apple-touch-icon-120x120.png><link rel=apple-touch-icon sizes=152x152 href=/apple-touch-icon-152x152.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon-180x180.png><link rel="shortcut icon" type=image/vnd.microsoft.icon href="/favicon.ico"><script>window.disqus_shortname = "davidchin-blog"</script></head><body itemscope itemtype=http://schema.org/WebPage class=""><header class=global-header><div class=global-header__container><nav class=global-navigation><button id=navicon-button class=navicon-button><i class="navicon-button__icon ion-navicon"></i></button><ul class=global-navigation__menu><li><a href=/blog>Blog</a></li><li><a href=/projects>Projects</a></li><li><a href=/about>About</a></li></ul></nav><a href="/" class=global-header__logo>David Chin</a></div></header><article itemscope itemtype=http://schema.org/BlogPosting><header class=page-header><div class=page-header__container><h1 itemprop=headline class=page-header__title>Using ngAnimate to animate directives in AngularJS</h1></div></header><div class=page-content><div class=content-column><div class=blog-article><p class=blog-article__meta><strong>angularjs</strong> / <span itemprop=datePublished>17 May 2014</span> / <a href=/blog/using-nganimate-to-animate-directives-in-angularjs/#disqus_thread data-disqus-identifier="/blog/using-nganimate-to-animate-directives-in-angularjs/">0 Comments</a></p><div itemtype=articleBody><p>AngularJS makes it easy to animate elements using CSS. When ngAnimate module is specified as a dependency, many default Angular directives inherit the ability to automatically add and/or remove classes when certain events occur. Therefore, if these classes contain CSS transitions or animations, the applied elements would be animated accordingly. The good thing about this approach, compared to using jQuery, is that transitions that are purely presentational and neatly separated from your application logic. Therefore, even if your user’s browser doesn’t support CSS transitions, he can still use your application.</p><h2 id=example-using-default-directive>Example using default directive</h2><p>Take ngRepeat as an example, When the directive inserts a new element on a page, it adds <code>ng-enter</code> class to the inserted element. In <code>ng-repeat</code>, you can define which properties you wish to animate. And then, it adds <code>ng-enter-active</code> when your pre-defined animation is ready to fire, and removes it when the animation finishes. Behind the scene, $animate service manages the chain of events so you don’t have to worry about setting up observers and handlers yourself.</p><p>This is how you might set up your stylesheet in SCSS:</p><div class=highlight><pre><code class=language-scss data-lang=scss><span class=nc>.list-group-item</span> <span class=p>{</span>
  <span class=c1>// Apply transitions when an item gets added, removed or repositioned in a list</span>
  <span class=k>&amp;</span><span class=nc>.ng-enter</span><span class=o>,</span>
  <span class=k>&amp;</span><span class=nc>.ng-leave</span><span class=o>,</span>
  <span class=k>&amp;</span><span class=nc>.ng-move</span> <span class=p>{</span>
    <span class=na>transition</span><span class=o>:</span> <span class=mi>0</span><span class=mf>.5</span><span class=kt>s</span> <span class=n>linear</span> <span class=n>all</span><span class=p>;</span>
  <span class=p>}</span>

  <span class=c1>// Apply a transition delay (stagger effect) to items (with the same parent element) that are manipulated at the same time</span>
  <span class=c1>// For example, if multiple items get added at once, ng-enter transition would be applied to each with a delay in between</span>
  <span class=k>&amp;</span><span class=nc>.ng-enter-stagger</span><span class=o>,</span>
  <span class=k>&amp;</span><span class=nc>.ng-leave-stagger</span><span class=o>,</span>
  <span class=k>&amp;</span><span class=nc>.ng-move-stagger</span> <span class=p>{</span>
    <span class=na>transition-delay</span><span class=o>:</span> <span class=mi>0</span><span class=mf>.05</span><span class=kt>s</span><span class=p>;</span>
  <span class=p>}</span>

  <span class=c1>// Define the start opacity value for ng-enter and ng-move</span>
  <span class=c1>// And define the end value for ng-leave</span>
  <span class=k>&amp;</span><span class=nc>.ng-enter</span><span class=o>,</span>
  <span class=k>&amp;</span><span class=nc>.ng-move</span><span class=o>,</span>
  <span class=k>&amp;</span><span class=nc>.ng-leave.ng-leave-active</span> <span class=p>{</span>
    <span class=na>opacity</span><span class=o>:</span> <span class=mi>0</span><span class=p>;</span>
  <span class=p>}</span>

  <span class=c1>// Define the start opacity value for ng-leave</span>
  <span class=c1>// And define the end value for ng-enter and ng-move</span>
  <span class=k>&amp;</span><span class=nc>.ng-enter.ng-enter-active</span><span class=o>,</span>
  <span class=k>&amp;</span><span class=nc>.ng-move.ng-move-active</span><span class=o>,</span>
  <span class=k>&amp;</span><span class=nc>.ng-leave</span> <span class=p>{</span>
    <span class=na>opacity</span><span class=o>:</span> <span class=mi>1</span><span class=p>;</span>
  <span class=p>}</span>
<span class=p>}</span></code></pre></div><p>And your view is simply:</p><div class=highlight><pre><code class=language-html data-lang=html><span class=nt>&lt;ul&gt;</span>
  <span class=nt>&lt;li</span> <span class=na>ng-repeat=</span><span class=s>&quot;country in countries&quot;</span> <span class=na>class=</span><span class=s>&quot;list-group-item&quot;</span><span class=nt>&gt;</span>
    
  <span class=nt>&lt;/li&gt;</span>
<span class=nt>&lt;/ul&gt;</span></code></pre></div><h2 id=example-using-custom-directive>Example using custom directive</h2><p>If you’re writing your own directive, you can use $animate service to perform ‘enter’, ‘leave’ and ‘move’ animations manually. It is what gets used internally by default directives in Angular. You can still use $animate API even if ngAnimate module is not injected. The main module has a barebone version which gets decorated when ngAnimate becomes available.</p><p>This is how you might want to use <code>$animate</code> service to perform DOM manipulations with animation hooks.</p><div class=highlight><pre><code class=language-javascript data-lang=javascript><span class=nx>angular</span><span class=p>.</span><span class=nx>module</span><span class=p>(</span><span class=s1>&#39;Demo&#39;</span><span class=p>,</span> <span class=p>[</span><span class=s1>&#39;ngAnimate&#39;</span><span class=p>])</span>

  <span class=c1>// Directive to display the meta data of an item</span>
  <span class=c1>// For example:</span>
  <span class=c1>// &lt;li item-meta=&quot;item&quot;&gt;&lt;/li&gt;</span>
  <span class=p>.</span><span class=nx>directive</span><span class=p>(</span><span class=s1>&#39;itemMeta&#39;</span><span class=p>,</span> <span class=kd>function</span><span class=p>(</span><span class=nx>$animate</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>return</span> <span class=p>{</span>
      <span class=nx>restrict</span><span class=o>:</span> <span class=s1>&#39;A&#39;</span><span class=p>,</span>
      <span class=nx>scope</span><span class=o>:</span> <span class=p>{</span>
        <span class=nx>item</span><span class=o>:</span> <span class=s1>&#39;=itemMeta&#39;</span>
      <span class=p>},</span>
      <span class=nx>link</span><span class=o>:</span> <span class=kd>function</span><span class=p>(</span><span class=nx>scope</span><span class=p>,</span> <span class=nx>element</span><span class=p>)</span> <span class=p>{</span>
        <span class=kd>var</span> <span class=nx>label</span><span class=p>;</span>

        <span class=c1>// Watch for changes to the bound object</span>
        <span class=nx>scope</span><span class=p>.</span><span class=nx>$watch</span><span class=p>(</span><span class=s1>&#39;item.category&#39;</span><span class=p>,</span> <span class=kd>function</span><span class=p>(</span><span class=nx>value</span><span class=p>)</span> <span class=p>{</span>
          <span class=c1>// Create a label element (it not created already)</span>
          <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nx>label</span><span class=p>)</span> <span class=p>{</span>
            <span class=nx>label</span> <span class=o>=</span> <span class=nx>angular</span><span class=p>.</span><span class=nx>element</span><span class=p>(</span><span class=s1>&#39;&lt;span&gt;&#39;</span><span class=p>).</span><span class=nx>addClass</span><span class=p>(</span><span class=s1>&#39;label label-info&#39;</span><span class=p>);</span>
          <span class=p>}</span>

          <span class=c1>// Display data bound by its parent controller</span>
          <span class=nx>label</span><span class=p>.</span><span class=nx>text</span><span class=p>(</span><span class=nx>value</span><span class=p>);</span>
        <span class=p>});</span>

        <span class=c1>// Listen for mouse events</span>
        <span class=nx>element</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;mouseenter&#39;</span><span class=p>,</span> <span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
          <span class=nx>scope</span><span class=p>.</span><span class=nx>$apply</span><span class=p>(</span><span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
            <span class=kd>var</span> <span class=nx>contents</span> <span class=o>=</span> <span class=nx>element</span><span class=p>.</span><span class=nx>contents</span><span class=p>();</span>

            <span class=c1>// Append the label as a child element and trigger &#39;ng-enter&#39; transition</span>
            <span class=nx>$animate</span><span class=p>.</span><span class=nx>enter</span><span class=p>(</span><span class=nx>label</span><span class=p>,</span> <span class=nx>element</span><span class=p>,</span> <span class=nx>contents</span><span class=p>.</span><span class=nx>eq</span><span class=p>(</span><span class=nx>contents</span><span class=p>.</span><span class=nx>length</span> <span class=o>-</span> <span class=mi>1</span><span class=p>));</span>
          <span class=p>});</span>
        <span class=p>});</span>

        <span class=nx>element</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;mouseleave&#39;</span><span class=p>,</span> <span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
          <span class=nx>scope</span><span class=p>.</span><span class=nx>$apply</span><span class=p>(</span><span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
            <span class=c1>// Remove the label from the element and trigger &#39;ng-leave&#39; transition</span>
            <span class=nx>$animate</span><span class=p>.</span><span class=nx>leave</span><span class=p>(</span><span class=nx>label</span><span class=p>);</span>
          <span class=p>});</span>
        <span class=p>});</span>
      <span class=p>}</span>
    <span class=p>};</span>
  <span class=p>});</span></code></pre></div><p>Alternatively, you can use any of the default directives inside your directive template to borrow some of their animation abilities.</p><h2 id=demo>Demo</h2><p>You can have a look at this <a href="http://jsfiddle.net/dyfchin/dY34f/">demo</a>, which demonstrates how AngularJS automatically adds pre-defined classes to a list of elements when they get added, removed or moved by various filters. It also demonstrates how to perform class-based animations when writing your own directive using <code>$animate</code> service.</p><h2 id=javascript-based-animation>JavaScript-based animation</h2><p>If you want to show animations in older browsers that don’t support CSS transitions or animations. AngularJS does have a way for you to define JavaScript-based animations. I’m not going to go into it in detail, but basically, you have to define a CSS class and specify what animations you want to run when certain events (i.e.: enter, leave, move) get fired by <code>$animate</code> service.</p><div class=highlight><pre><code class=language-javascript data-lang=javascript><span class=nx>angular</span><span class=p>.</span><span class=nx>module</span><span class=p>(</span><span class=s1>&#39;Demo&#39;</span><span class=p>,</span> <span class=p>[</span><span class=s1>&#39;ngAnimate&#39;</span><span class=p>])</span>

    <span class=c1>// Any element that has .demo-animation class would execute the following</span>
    <span class=p>.</span><span class=nx>animation</span><span class=p>(</span><span class=s1>&#39;.demo-animation&#39;</span><span class=p>,</span> <span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
      <span class=k>return</span> <span class=p>{</span>
        <span class=c1>// Same terminology as CSS-based animations</span>
        <span class=nx>enter</span><span class=o>:</span> <span class=kd>function</span><span class=p>(</span><span class=nx>element</span><span class=p>,</span> <span class=nx>done</span><span class=p>)</span> <span class=p>{</span>
          <span class=nx>$</span><span class=p>(</span><span class=nx>element</span><span class=p>).</span><span class=nx>animate</span><span class=p>({</span> <span class=nx>left</span><span class=o>:</span> <span class=mi>100</span> <span class=p>},</span> <span class=nx>done</span><span class=p>);</span>
        <span class=p>}</span>
      <span class=p>}</span>
    <span class=p>});</span></code></pre></div></div></div><div itemtype=comment class=blog-comment><div id=disqus_thread></div><script type=text/javascript>var disqus_identifier = "/blog/using-nganimate-to-animate-directives-in-angularjs/";

  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();</script><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript><a href=http://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></div></div></article><footer class=global-footer><div class=global-footer__container><nav class=global-footer-navigation><ul><li><a href=//au.linkedin.com/in/davidchin86 target=_blank>LinkedIn</a></li><li><a href=//github.com/davidchin target=_blank>GitHub</a></li><li><a href=//flickr.com/dyfchin target=_blank>Flickr</a></li><li><a href=/blog>Blog</a></li></ul></nav><aside class=fine-print-footer><div>&copy; All rights reserved.</div><div>Built with Jekyll, CoffeeScript, SASS &amp; Grunt. View <a href=//github.com/davidchin/davidchin.github.io target=_blank>source</a></div></aside></div></footer><!-- GA --><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-41589871-1', 'auto');
  ga('require', 'linkid', 'linkid.js');
  ga('require', 'displayfeatures');
  ga('send', 'pageview');</script><!-- Disqus --><script>(function () {
    var s = document.createElement('script'); s.async = true;
    s.type = 'text/javascript';
    s.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
  }());</script><!-- CDN --><script src=https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js></script><!-- Packaged JS --><script src=/js/application.c54b.js></script></body></html>